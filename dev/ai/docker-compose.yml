version: '3.8'

services:
    # Vector DB (RAG용)
    weaviate:
        image: semitechnologies/weaviate:latest
        ports:
            - "8080:8080"
            - "50051:50051"
        environment:
            QUERY_DEFAULTS_LIMIT: 25
            AUTHENTICATION_ANONYMOUS_ACCESS_ENABLED: 'true'
            PERSISTENCE_DATA_PATH: '/var/lib/weaviate'
            DEFAULT_VECTORIZER_MODULE: 'none'
            ENABLE_MODULES: ''

    # 메타데이터 저장용 DB
    postgres:
        image: postgres:15-alpine
        environment:
            POSTGRES_USER: ai_user
            POSTGRES_PASSWORD: password
            POSTGRES_DB: ai_meta
        ports:
            - "5432:5432"
        volumes:
            - ai_pg_data:/var/lib/postgresql/data

volumes:
    ai_pg_data:
